"use strict";

var _react = _interopRequireDefault(require("react"));

var _reactDom = _interopRequireDefault(require("react-dom"));

var _server = _interopRequireDefault(require("react-dom/server"));

var _testUtils = _interopRequireDefault(require("react-dom/test-utils"));

var _shallow = _interopRequireDefault(require("react-test-renderer/shallow"));

var _object = _interopRequireDefault(require("object.values"));

var _reactIs = require("react-is");

var _enzyme = require("enzyme");

var _enzymeAdapterUtils = require("enzyme-adapter-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function compositeTypeToNodeType(type) {
  switch (type) {
    case 0:
    case 1:
      return 'class';

    case 2:
      return 'function';

    default:
      throw new Error("Enzyme Internal Error: unknown composite type ".concat(type));
  }
}

function childrenFromInst(inst, el) {
  if (inst._renderedChildren) {
    return (0, _object["default"])(inst._renderedChildren);
  }

  if (el.props) {
    return (0, _object["default"])({
      '.0': el.props.children
    });
  }

  return [];
}

function nodeType(inst) {
  if (inst._compositeType != null) {
    return compositeTypeToNodeType(inst._compositeType);
  }

  return 'host';
}

function instanceToTree(inst) {
  if (!inst || _typeof(inst) !== 'object') {
    return inst;
  }

  var el = inst._currentElement;

  if (el == null || el === false) {
    return null;
  }

  if (_typeof(el) !== 'object') {
    return el;
  }

  if (inst._renderedChildren) {
    return {
      nodeType: nodeType(inst),
      type: el.type,
      props: el.props,
      key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),
      ref: el.ref,
      instance: inst._instance || inst._hostNode || null,
      rendered: (0, _object["default"])(inst._renderedChildren).map(instanceToTree)
    };
  }

  if (inst._hostNode) {
    return {
      nodeType: 'host',
      type: el.type,
      props: el.props,
      key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),
      ref: el.ref,
      instance: inst._instance || inst._hostNode || null,
      rendered: childrenFromInst(inst, el).map(instanceToTree)
    };
  }

  if (inst._renderedComponent) {
    return {
      nodeType: nodeType(inst),
      type: el.type,
      props: el.props,
      key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),
      ref: el.ref,
      instance: inst._instance || inst._hostNode || null,
      rendered: instanceToTree(inst._renderedComponent)
    };
  }

  return {
    nodeType: nodeType(inst),
    type: el.type,
    props: el.props,
    key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),
    ref: el.ref,
    instance: inst._instance || null,
    rendered: childrenFromInst(inst, el).map(instanceToTree)
  };
}

var eventOptions = {
  animation: true
};

var ReactFifteenAdapter = /*#__PURE__*/function (_EnzymeAdapter) {
  _inherits(ReactFifteenAdapter, _EnzymeAdapter);

  var _super = _createSuper(ReactFifteenAdapter);

  function ReactFifteenAdapter() {
    var _this;

    _classCallCheck(this, ReactFifteenAdapter);

    _this = _super.call(this);
    var lifecycles = _this.options.lifecycles;
    _this.options = _objectSpread(_objectSpread({}, _this.options), {}, {
      supportPrevContextArgumentOfComponentDidUpdate: true,
      // TODO: remove, semver-major
      legacyContextMode: 'parent',
      lifecycles: _objectSpread(_objectSpread({}, lifecycles), {}, {
        componentDidUpdate: {
          prevContext: true
        },
        getChildContext: {
          calledByRenderer: true
        }
      })
    });
    return _this;
  }

  _createClass(ReactFifteenAdapter, [{
    key: "createMountRenderer",
    value: function createMountRenderer(options) {
      (0, _enzymeAdapterUtils.assertDomAvailable)('mount');
      var domNode = options.attachTo || global.document.createElement('div');
      var instance = null;
      var adapter = this;
      return {
        render: function render(el, context, callback) {
          if (instance === null) {
            var type = el.type,
                props = el.props,
                ref = el.ref;

            var wrapperProps = _objectSpread({
              Component: type,
              wrappingComponentProps: options.wrappingComponentProps,
              props: props,
              context: context
            }, ref && {
              refProp: ref
            });

            var ReactWrapperComponent = (0, _enzymeAdapterUtils.createMountWrapper)(el, _objectSpread(_objectSpread({}, options), {}, {
              adapter: adapter
            }));

            var wrappedEl = /*#__PURE__*/_react["default"].createElement(ReactWrapperComponent, wrapperProps);

            instance = _reactDom["default"].render(wrappedEl, domNode);

            if (typeof callback === 'function') {
              callback();
            }
          } else {
            instance.setChildProps(el.props, context, callback);
          }
        },
        unmount: function unmount() {
          _reactDom["default"].unmountComponentAtNode(domNode);

          instance = null;
        },
        getNode: function getNode() {
          if (!instance) {
            return null;
          }

          return (0, _enzymeAdapterUtils.getNodeFromRootFinder)(adapter.isCustomComponent, instanceToTree(instance._reactInternalInstance), options);
        },
        simulateEvent: function simulateEvent(node, event, mock) {
          var mappedEvent = (0, _enzymeAdapterUtils.mapNativeEventNames)(event, eventOptions);
          var eventFn = _testUtils["default"].Simulate[mappedEvent];

          if (!eventFn) {
            throw new TypeError("ReactWrapper::simulate() event '".concat(event, "' does not exist"));
          } // eslint-disable-next-line react/no-find-dom-node


          eventFn(_reactDom["default"].findDOMNode(node.instance), mock);
        },
        batchedUpdates: function batchedUpdates(fn) {
          return _reactDom["default"].unstable_batchedUpdates(fn);
        },
        getWrappingComponentRenderer: function getWrappingComponentRenderer() {
          return _objectSpread(_objectSpread({}, this), (0, _enzymeAdapterUtils.getWrappingComponentMountRenderer)({
            toTree: function toTree(inst) {
              return instanceToTree(inst._reactInternalInstance);
            },
            getMountWrapperInstance: function getMountWrapperInstance() {
              return instance;
            }
          }));
        }
      };
    }
  }, {
    key: "createShallowRenderer",
    value: function createShallowRenderer()
    /* options */
    {
      var renderer = new _shallow["default"]();
      var isDOM = false;
      var cachedNode = null;
      return {
        render: function render(el, context) {
          cachedNode = el;
          /* eslint consistent-return: 0 */

          if (typeof el.type === 'string') {
            isDOM = true;
          } else {
            isDOM = false;
            return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              return renderer.render(el, context);
            });
          }
        },
        unmount: function unmount() {
          renderer.unmount();
        },
        getNode: function getNode() {
          if (isDOM) {
            return (0, _enzymeAdapterUtils.elementToTree)(cachedNode);
          }

          var output = renderer.getRenderOutput();
          return {
            nodeType: compositeTypeToNodeType(renderer._instance._compositeType),
            type: cachedNode.type,
            props: cachedNode.props,
            key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(cachedNode.key),
            ref: cachedNode.ref,
            instance: renderer._instance._instance,
            rendered: (0, _enzymeAdapterUtils.elementToTree)(output)
          };
        },
        simulateEvent: function simulateEvent(node, event) {
          for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
            args[_key - 2] = arguments[_key];
          }

          var handler = node.props[(0, _enzymeAdapterUtils.propFromEvent)(event, eventOptions)];

          if (handler) {
            (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
              // TODO(lmr): create/use synthetic events
              // TODO(lmr): emulate React's event propagation
              renderer.unstable_batchedUpdates(function () {
                handler.apply(void 0, args);
              });
            });
          }
        },
        batchedUpdates: function batchedUpdates(fn) {
          return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {
            return renderer.unstable_batchedUpdates(fn);
          });
        }
      };
    }
  }, {
    key: "createStringRenderer",
    value: function createStringRenderer(options) {
      return {
        render: function render(el, context) {
          if (options.context && (el.type.contextTypes || options.childContextTypes)) {
            var childContextTypes = _objectSpread(_objectSpread({}, el.type.contextTypes || {}), options.childContextTypes);

            var ContextWrapper = (0, _enzymeAdapterUtils.createRenderWrapper)(el, context, childContextTypes);
            return _server["default"].renderToStaticMarkup( /*#__PURE__*/_react["default"].createElement(ContextWrapper));
          }

          return _server["default"].renderToStaticMarkup(el);
        }
      };
    } // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation
    // specific, like `attach` etc. for React, but not part of this interface explicitly.
    // eslint-disable-next-line class-methods-use-this, no-unused-vars

  }, {
    key: "createRenderer",
    value: function createRenderer(options) {
      switch (options.mode) {
        case _enzyme.EnzymeAdapter.MODES.MOUNT:
          return this.createMountRenderer(options);

        case _enzyme.EnzymeAdapter.MODES.SHALLOW:
          return this.createShallowRenderer(options);

        case _enzyme.EnzymeAdapter.MODES.STRING:
          return this.createStringRenderer(options);

        default:
          throw new Error("Enzyme Internal Error: Unrecognized mode: ".concat(options.mode));
      }
    }
  }, {
    key: "wrap",
    value: function wrap(element) {
      return (0, _enzymeAdapterUtils.wrap)(element);
    } // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed
    // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should
    // be pretty straightforward for people to implement.
    // eslint-disable-next-line class-methods-use-this, no-unused-vars

  }, {
    key: "nodeToElement",
    value: function nodeToElement(node) {
      if (!node || _typeof(node) !== 'object') return null;
      return /*#__PURE__*/_react["default"].createElement(node.type, (0, _enzymeAdapterUtils.propsWithKeysAndRef)(node));
    }
  }, {
    key: "elementToNode",
    value: function elementToNode(element) {
      return (0, _enzymeAdapterUtils.elementToTree)(element);
    }
  }, {
    key: "nodeToHostNode",
    value: function nodeToHostNode(node) {
      return _reactDom["default"].findDOMNode(node.instance);
    }
  }, {
    key: "displayNameOfNode",
    value: function displayNameOfNode(node) {
      return (0, _enzymeAdapterUtils.displayNameOfNode)(node);
    }
  }, {
    key: "isValidElement",
    value: function isValidElement(element) {
      return (0, _reactIs.isElement)(element);
    }
  }, {
    key: "isValidElementType",
    value: function isValidElementType(object) {
      return (0, _reactIs.isValidElementType)(object);
    }
  }, {
    key: "isCustomComponent",
    value: function isCustomComponent(component) {
      return typeof component === 'function';
    }
  }, {
    key: "createElement",
    value: function createElement() {
      return /*#__PURE__*/_react["default"].createElement.apply(_react["default"], arguments);
    }
  }, {
    key: "invokeSetStateCallback",
    value: function invokeSetStateCallback(instance, callback) {
      // React in >= 15.4, and < 16 pass undefined to a setState callback
      callback.call(instance, undefined);
    }
  }, {
    key: "wrapWithWrappingComponent",
    value: function wrapWithWrappingComponent(node, options) {
      return {
        RootFinder: _enzymeAdapterUtils.RootFinder,
        node: (0, _enzymeAdapterUtils.wrapWithWrappingComponent)(_react["default"].createElement, node, options)
      };
    }
  }]);

  return ReactFifteenAdapter;
}(_enzyme.EnzymeAdapter);

module.exports = ReactFifteenAdapter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9SZWFjdEZpZnRlZW5BZGFwdGVyLmpzIl0sIm5hbWVzIjpbImNvbXBvc2l0ZVR5cGVUb05vZGVUeXBlIiwidHlwZSIsIkVycm9yIiwiY2hpbGRyZW5Gcm9tSW5zdCIsImluc3QiLCJlbCIsIl9yZW5kZXJlZENoaWxkcmVuIiwicHJvcHMiLCJjaGlsZHJlbiIsIm5vZGVUeXBlIiwiX2NvbXBvc2l0ZVR5cGUiLCJpbnN0YW5jZVRvVHJlZSIsIl9jdXJyZW50RWxlbWVudCIsImtleSIsInJlZiIsImluc3RhbmNlIiwiX2luc3RhbmNlIiwiX2hvc3ROb2RlIiwicmVuZGVyZWQiLCJtYXAiLCJfcmVuZGVyZWRDb21wb25lbnQiLCJldmVudE9wdGlvbnMiLCJhbmltYXRpb24iLCJSZWFjdEZpZnRlZW5BZGFwdGVyIiwibGlmZWN5Y2xlcyIsIm9wdGlvbnMiLCJzdXBwb3J0UHJldkNvbnRleHRBcmd1bWVudE9mQ29tcG9uZW50RGlkVXBkYXRlIiwibGVnYWN5Q29udGV4dE1vZGUiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2Q29udGV4dCIsImdldENoaWxkQ29udGV4dCIsImNhbGxlZEJ5UmVuZGVyZXIiLCJkb21Ob2RlIiwiYXR0YWNoVG8iLCJnbG9iYWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGFwdGVyIiwicmVuZGVyIiwiY29udGV4dCIsImNhbGxiYWNrIiwid3JhcHBlclByb3BzIiwiQ29tcG9uZW50Iiwid3JhcHBpbmdDb21wb25lbnRQcm9wcyIsInJlZlByb3AiLCJSZWFjdFdyYXBwZXJDb21wb25lbnQiLCJ3cmFwcGVkRWwiLCJSZWFjdCIsIlJlYWN0RE9NIiwic2V0Q2hpbGRQcm9wcyIsInVubW91bnQiLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwiZ2V0Tm9kZSIsImlzQ3VzdG9tQ29tcG9uZW50IiwiX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSIsInNpbXVsYXRlRXZlbnQiLCJub2RlIiwiZXZlbnQiLCJtb2NrIiwibWFwcGVkRXZlbnQiLCJldmVudEZuIiwiVGVzdFV0aWxzIiwiU2ltdWxhdGUiLCJUeXBlRXJyb3IiLCJmaW5kRE9NTm9kZSIsImJhdGNoZWRVcGRhdGVzIiwiZm4iLCJ1bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyIsImdldFdyYXBwaW5nQ29tcG9uZW50UmVuZGVyZXIiLCJ0b1RyZWUiLCJnZXRNb3VudFdyYXBwZXJJbnN0YW5jZSIsInJlbmRlcmVyIiwiU2hhbGxvd1JlbmRlcmVyIiwiaXNET00iLCJjYWNoZWROb2RlIiwib3V0cHV0IiwiZ2V0UmVuZGVyT3V0cHV0IiwiYXJncyIsImhhbmRsZXIiLCJjb250ZXh0VHlwZXMiLCJjaGlsZENvbnRleHRUeXBlcyIsIkNvbnRleHRXcmFwcGVyIiwiUmVhY3RET01TZXJ2ZXIiLCJyZW5kZXJUb1N0YXRpY01hcmt1cCIsIm1vZGUiLCJFbnp5bWVBZGFwdGVyIiwiTU9ERVMiLCJNT1VOVCIsImNyZWF0ZU1vdW50UmVuZGVyZXIiLCJTSEFMTE9XIiwiY3JlYXRlU2hhbGxvd1JlbmRlcmVyIiwiU1RSSU5HIiwiY3JlYXRlU3RyaW5nUmVuZGVyZXIiLCJlbGVtZW50Iiwib2JqZWN0IiwiY29tcG9uZW50IiwiY2FsbCIsInVuZGVmaW5lZCIsIlJvb3RGaW5kZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQSxTQUFTQSx1QkFBVCxDQUFpQ0MsSUFBakMsRUFBdUM7QUFDckMsVUFBUUEsSUFBUjtBQUNFLFNBQUssQ0FBTDtBQUNBLFNBQUssQ0FBTDtBQUFRLGFBQU8sT0FBUDs7QUFDUixTQUFLLENBQUw7QUFBUSxhQUFPLFVBQVA7O0FBQ1I7QUFDRSxZQUFNLElBQUlDLEtBQUoseURBQTJERCxJQUEzRCxFQUFOO0FBTEo7QUFPRDs7QUFDRCxTQUFTRSxnQkFBVCxDQUEwQkMsSUFBMUIsRUFBZ0ND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QU1YLGFBQU4sQ0FBb0JvQixJQUFJLENBQUN2RCxJQUF6QixFQUErQiw2Q0FBb0J1RCxJQUFwQixDQUEvQixDQUFQO0FBQ0Q7OztrQ0FFYXFDLE8sRUFBUztBQUNyQixhQUFPLHVDQUFjQSxPQUFkLENBQVA7QUFDRDs7O21DQUVjckMsSSxFQUFNO0FBQ25CLGFBQU9SLHFCQUFTZ0IsV0FBVCxDQUFxQlIsSUFBSSxDQUFDekMsUUFBMUIsQ0FBUDtBQUNEOzs7c0NBRWlCeUMsSSxFQUFNO0FBQ3RCLGFBQU8sMkNBQWtCQSxJQUFsQixDQUFQO0FBQ0Q7OzttQ0FFY3FDLE8sRUFBUztBQUN0QixhQUFPLHdCQUFVQSxPQUFWLENBQVA7QUFDRDs7O3VDQUVrQkMsTSxFQUFRO0FBQ3pCLGFBQU8saUNBQW1CQSxNQUFuQixDQUFQO0FBQ0Q7OztzQ0FFaUJDLFMsRUFBVztBQUMzQixhQUFPLE9BQU9BLFNBQVAsS0FBcUIsVUFBNUI7QUFDRDs7O29DQUVzQjtBQUNyQiwwQkFBT2hELGtCQUFNWCxhQUFOLG9DQUFQO0FBQ0Q7OzsyQ0FFc0JyQixRLEVBQVV5QixRLEVBQVU7QUFDekM7QUFDQUEsTUFBQUEsUUFBUSxDQUFDd0QsSUFBVCxDQUFjakYsUUFBZCxFQUF3QmtGLFNBQXhCO0FBQ0Q7Ozs4Q0FFeUJ6QyxJLEVBQU0vQixPLEVBQVM7QUFDdkMsYUFBTztBQUNMeUUsUUFBQUEsVUFBVSxFQUFWQSw4QkFESztBQUVMMUMsUUFBQUEsSUFBSSxFQUFFLG1EQUEwQlQsa0JBQU1YLGFBQWhDLEVBQStDb0IsSUFBL0MsRUFBcUQvQixPQUFyRDtBQUZELE9BQVA7QUFJRDs7OztFQXhOK0I0RCxxQjs7QUEyTmxDYyxNQUFNLENBQUNDLE9BQVAsR0FBaUI3RSxtQkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9leHRlbnNpb25zXG5pbXBvcnQgUmVhY3RET01TZXJ2ZXIgZnJvbSAncmVhY3QtZG9tL3NlcnZlcic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVucmVzb2x2ZWQsIGltcG9ydC9leHRlbnNpb25zXG5pbXBvcnQgVGVzdFV0aWxzIGZyb20gJ3JlYWN0LWRvbS90ZXN0LXV0aWxzJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCwgaW1wb3J0L2V4dGVuc2lvbnNcbmltcG9ydCBTaGFsbG93UmVuZGVyZXIgZnJvbSAncmVhY3QtdGVzdC1yZW5kZXJlci9zaGFsbG93JztcbmltcG9ydCB2YWx1ZXMgZnJvbSAnb2JqZWN0LnZhbHVlcyc7XG5pbXBvcnQgeyBpc0VsZW1lbnQsIGlzVmFsaWRFbGVtZW50VHlwZSB9IGZyb20gJ3JlYWN0LWlzJztcbmltcG9ydCB7IEVuenltZUFkYXB0ZXIgfSBmcm9tICdlbnp5bWUnO1xuaW1wb3J0IHtcbiAgZGlzcGxheU5hbWVPZk5vZGUsXG4gIGVsZW1lbnRUb1RyZWUsXG4gIG1hcE5hdGl2ZUV2ZW50TmFtZXMsXG4gIHByb3BGcm9tRXZlbnQsXG4gIHdpdGhTZXRTdGF0ZUFsbG93ZWQsXG4gIGFzc2VydERvbUF2YWlsYWJsZSxcbiAgY3JlYXRlUmVuZGVyV3JhcHBlcixcbiAgY3JlYXRlTW91bnRXcmFwcGVyLFxuICBwcm9wc1dpdGhLZXlzQW5kUmVmLFxuICBlbnN1cmVLZXlPclVuZGVmaW5lZCxcbiAgd3JhcCxcbiAgUm9vdEZpbmRlcixcbiAgZ2V0Tm9kZUZyb21Sb290RmluZGVyLFxuICB3cmFwV2l0aFdyYXBwaW5nQ29tcG9uZW50LFxuICBnZXRXcmFwcGluZ0NvbXBvbmVudE1vdW50UmVuZGVyZXIsXG59IGZyb20gJ2VuenltZS1hZGFwdGVyLXV0aWxzJztcblxuZnVuY3Rpb24gY29tcG9zaXRlVHlwZVRvTm9kZVR5cGUodHlwZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIDA6XG4gICAgY2FzZSAxOiByZXR1cm4gJ2NsYXNzJztcbiAgICBjYXNlIDI6IHJldHVybiAnZnVuY3Rpb24nO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVuenltZSBJbnRlcm5hbCBFcnJvcjogdW5rbm93biBjb21wb3NpdGUgdHlwZSAke3R5cGV9YCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNoaWxkcmVuRnJvbUluc3QoaW5zdCwgZWwpIHtcbiAgaWYgKGluc3QuX3JlbmRlcmVkQ2hpbGRyZW4pIHtcbiAgICByZXR1cm4gdmFsdWVzKGluc3QuX3JlbmRlcmVkQ2hpbGRyZW4pO1xuICB9XG4gIGlmIChlbC5wcm9wcykge1xuICAgIHJldHVybiB2YWx1ZXMoeyAnLjAnOiBlbC5wcm9wcy5jaGlsZHJlbiB9KTtcbiAgfVxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIG5vZGVUeXBlKGluc3QpIHtcbiAgaWYgKGluc3QuX2NvbXBvc2l0ZVR5cGUgIT0gbnVsbCkge1xuICAgIHJldHVybiBjb21wb3NpdGVUeXBlVG9Ob2RlVHlwZShpbnN0Ll9jb21wb3NpdGVUeXBlKTtcbiAgfVxuICByZXR1cm4gJ2hvc3QnO1xufVxuXG5mdW5jdGlvbiBpbnN0YW5jZVRvVHJlZShpbnN0KSB7XG4gIGlmICghaW5zdCB8fCB0eXBlb2YgaW5zdCAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gaW5zdDtcbiAgfVxuICBjb25zdCBlbCA9IGluc3QuX2N1cnJlbnRFbGVtZW50O1xuICBpZiAoZWwgPT0gbnVsbCB8fCBlbCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIGVsICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBlbDtcbiAgfVxuICBpZiAoaW5zdC5fcmVuZGVyZWRDaGlsZHJlbikge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlVHlwZTogbm9kZVR5cGUoaW5zdCksXG4gICAgICB0eXBlOiBlbC50eXBlLFxuICAgICAgcHJvcHM6IGVsLnByb3BzLFxuICAgICAga2V5OiBlbnN1cmVLZXlPclVuZGVmaW5lZChlbC5rZXkpLFxuICAgICAgcmVmOiBlbC5yZWYsXG4gICAgICBpbnN0YW5jZTogaW5zdC5faW5zdGFuY2UgfHwgaW5zdC5faG9zdE5vZGUgfHwgbnVsbCxcbiAgICAgIHJlbmRlcmVkOiB2YWx1ZXMoaW5zdC5fcmVuZGVyZWRDaGlsZHJlbikubWFwKGluc3RhbmNlVG9UcmVlKSxcbiAgICB9O1xuICB9XG4gIGlmIChpbnN0Ll9ob3N0Tm9kZSkge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlVHlwZTogJ2hvc3QnLFxuICAgICAgdHlwZTogZWwudHlwZSxcbiAgICAgIHByb3BzOiBlbC5wcm9wcyxcbiAgICAgIGtleTogZW5zdXJlS2V5T3JVbmRlZmluZWQoZWwua2V5KSxcbiAgICAgIHJlZjogZWwucmVmLFxuICAgICAgaW5zdGFuY2U6IGluc3QuX2luc3RhbmNlIHx8IGluc3QuX2hvc3ROb2RlIHx8IG51bGwsXG4gICAgICByZW5kZXJlZDogY2hpbGRyZW5Gcm9tSW5zdChpbnN0LCBlbCkubWFwKGluc3RhbmNlVG9UcmVlKSxcbiAgICB9O1xuICB9XG4gIGlmIChpbnN0Ll9yZW5kZXJlZENvbXBvbmVudCkge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlVHlwZTogbm9kZVR5cGUoaW5zdCksXG4gICAgICB0eXBlOiBlbC50eXBlLFxuICAgICAgcHJvcHM6IGVsLnByb3BzLFxuICAgICAga2V5OiBlbnN1cmVLZXlPclVuZGVmaW5lZChlbC5rZXkpLFxuICAgICAgcmVmOiBlbC5yZWYsXG4gICAgICBpbnN0YW5jZTogaW5zdC5faW5zdGFuY2UgfHwgaW5zdC5faG9zdE5vZGUgfHwgbnVsbCxcbiAgICAgIHJlbmRlcmVkOiBpbnN0YW5jZVRvVHJlZShpbnN0Ll9yZW5kZXJlZENvbXBvbmVudCksXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG5vZGVUeXBlOiBub2RlVHlwZShpbnN0KSxcbiAgICB0eXBlOiBlbC50eXBlLFxuICAgIHByb3BzOiBlbC5wcm9wcyxcbiAgICBrZXk6IGVuc3VyZUtleU9yVW5kZWZpbmVkKGVsLmtleSksXG4gICAgcmVmOiBlbC5yZWYsXG4gICAgaW5zdGFuY2U6IGluc3QuX2luc3RhbmNlIHx8IG51bGwsXG4gICAgcmVuZGVyZWQ6IGNoaWxkcmVuRnJvbUluc3QoaW5zdCwgZWwpLm1hcChpbnN0YW5jZVRvVHJlZSksXG4gIH07XG59XG5cbmNvbnN0IGV2ZW50T3B0aW9ucyA9IHsgYW5pbWF0aW9uOiB0cnVlIH07XG5cbmNsYXNzIFJlYWN0RmlmdGVlbkFkYXB0ZXIgZXh0ZW5kcyBFbnp5bWVBZGFwdGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IHsgbGlmZWN5Y2xlcyB9ID0gdGhpcy5vcHRpb25zO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIHN1cHBvcnRQcmV2Q29udGV4dEFyZ3VtZW50T2ZDb21wb25lbnREaWRVcGRhdGU6IHRydWUsIC8vIFRPRE86IHJlbW92ZSwgc2VtdmVyLW1ham9yXG4gICAgICBsZWdhY3lDb250ZXh0TW9kZTogJ3BhcmVudCcsXG4gICAgICBsaWZlY3ljbGVzOiB7XG4gICAgICAgIC4uLmxpZmVjeWNsZXMsXG4gICAgICAgIGNvbXBvbmVudERpZFVwZGF0ZToge1xuICAgICAgICAgIHByZXZDb250ZXh0OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBnZXRDaGlsZENvbnRleHQ6IHtcbiAgICAgICAgICBjYWxsZWRCeVJlbmRlcmVyOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY3JlYXRlTW91bnRSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgYXNzZXJ0RG9tQXZhaWxhYmxlKCdtb3VudCcpO1xuICAgIGNvbnN0IGRvbU5vZGUgPSBvcHRpb25zLmF0dGFjaFRvIHx8IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZXQgaW5zdGFuY2UgPSBudWxsO1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICByZW5kZXIoZWwsIGNvbnRleHQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IHsgdHlwZSwgcHJvcHMsIHJlZiB9ID0gZWw7XG4gICAgICAgICAgY29uc3Qgd3JhcHBlclByb3BzID0ge1xuICAgICAgICAgICAgQ29tcG9uZW50OiB0eXBlLFxuICAgICAgICAgICAgd3JhcHBpbmdDb21wb25lbnRQcm9wczogb3B0aW9ucy53cmFwcGluZ0NvbXBvbmVudFByb3BzLFxuICAgICAgICAgICAgcHJvcHMsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgLi4uKHJlZiAmJiB7IHJlZlByb3A6IHJlZiB9KSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IFJlYWN0V3JhcHBlckNvbXBvbmVudCA9IGNyZWF0ZU1vdW50V3JhcHBlcihlbCwgeyAuLi5vcHRpb25zLCBhZGFwdGVyIH0pO1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRFbCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3RXcmFwcGVyQ29tcG9uZW50LCB3cmFwcGVyUHJvcHMpO1xuICAgICAgICAgIGluc3RhbmNlID0gUmVhY3RET00ucmVuZGVyKHdyYXBwZWRFbCwgZG9tTm9kZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5zdGFuY2Uuc2V0Q2hpbGRQcm9wcyhlbC5wcm9wcywgY29udGV4dCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdW5tb3VudCgpIHtcbiAgICAgICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZShkb21Ob2RlKTtcbiAgICAgICAgaW5zdGFuY2UgPSBudWxsO1xuICAgICAgfSxcbiAgICAgIGdldE5vZGUoKSB7XG4gICAgICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0Tm9kZUZyb21Sb290RmluZGVyKFxuICAgICAgICAgIGFkYXB0ZXIuaXNDdXN0b21Db21wb25lbnQsXG4gICAgICAgICAgaW5zdGFuY2VUb1RyZWUoaW5zdGFuY2UuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSksXG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBzaW11bGF0ZUV2ZW50KG5vZGUsIGV2ZW50LCBtb2NrKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlZEV2ZW50ID0gbWFwTmF0aXZlRXZlbnROYW1lcyhldmVudCwgZXZlbnRPcHRpb25zKTtcbiAgICAgICAgY29uc3QgZXZlbnRGbiA9IFRlc3RVdGlscy5TaW11bGF0ZVttYXBwZWRFdmVudF07XG4gICAgICAgIGlmICghZXZlbnRGbikge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlYWN0V3JhcHBlcjo6c2ltdWxhdGUoKSBldmVudCAnJHtldmVudH0nIGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWZpbmQtZG9tLW5vZGVcbiAgICAgICAgZXZlbnRGbihSZWFjdERPTS5maW5kRE9NTm9kZShub2RlLmluc3RhbmNlKSwgbW9jayk7XG4gICAgICB9LFxuICAgICAgYmF0Y2hlZFVwZGF0ZXMoZm4pIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLnVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzKGZuKTtcbiAgICAgIH0sXG4gICAgICBnZXRXcmFwcGluZ0NvbXBvbmVudFJlbmRlcmVyKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgLi4uZ2V0V3JhcHBpbmdDb21wb25lbnRNb3VudFJlbmRlcmVyKHtcbiAgICAgICAgICAgIHRvVHJlZTogKGluc3QpID0+IGluc3RhbmNlVG9UcmVlKGluc3QuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSksXG4gICAgICAgICAgICBnZXRNb3VudFdyYXBwZXJJbnN0YW5jZTogKCkgPT4gaW5zdGFuY2UsXG4gICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjcmVhdGVTaGFsbG93UmVuZGVyZXIoLyogb3B0aW9ucyAqLykge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFNoYWxsb3dSZW5kZXJlcigpO1xuICAgIGxldCBpc0RPTSA9IGZhbHNlO1xuICAgIGxldCBjYWNoZWROb2RlID0gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgcmVuZGVyKGVsLCBjb250ZXh0KSB7XG4gICAgICAgIGNhY2hlZE5vZGUgPSBlbDtcbiAgICAgICAgLyogZXNsaW50IGNvbnNpc3RlbnQtcmV0dXJuOiAwICovXG4gICAgICAgIGlmICh0eXBlb2YgZWwudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpc0RPTSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNET00gPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gd2l0aFNldFN0YXRlQWxsb3dlZCgoKSA9PiByZW5kZXJlci5yZW5kZXIoZWwsIGNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVubW91bnQoKSB7XG4gICAgICAgIHJlbmRlcmVyLnVubW91bnQoKTtcbiAgICAgIH0sXG4gICAgICBnZXROb2RlKCkge1xuICAgICAgICBpZiAoaXNET00pIHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudFRvVHJlZShjYWNoZWROb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXQgPSByZW5kZXJlci5nZXRSZW5kZXJPdXRwdXQoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub2RlVHlwZTogY29tcG9zaXRlVHlwZVRvTm9kZVR5cGUocmVuZGVyZXIuX2luc3RhbmNlLl9jb21wb3NpdGVUeXBlKSxcbiAgICAgICAgICB0eXBlOiBjYWNoZWROb2RlLnR5cGUsXG4gICAgICAgICAgcHJvcHM6IGNhY2hlZE5vZGUucHJvcHMsXG4gICAgICAgICAga2V5OiBlbnN1cmVLZXlPclVuZGVmaW5lZChjYWNoZWROb2RlLmtleSksXG4gICAgICAgICAgcmVmOiBjYWNoZWROb2RlLnJlZixcbiAgICAgICAgICBpbnN0YW5jZTogcmVuZGVyZXIuX2luc3RhbmNlLl9pbnN0YW5jZSxcbiAgICAgICAgICByZW5kZXJlZDogZWxlbWVudFRvVHJlZShvdXRwdXQpLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHNpbXVsYXRlRXZlbnQobm9kZSwgZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IG5vZGUucHJvcHNbcHJvcEZyb21FdmVudChldmVudCwgZXZlbnRPcHRpb25zKV07XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgd2l0aFNldFN0YXRlQWxsb3dlZCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGxtcik6IGNyZWF0ZS91c2Ugc3ludGhldGljIGV2ZW50c1xuICAgICAgICAgICAgLy8gVE9ETyhsbXIpOiBlbXVsYXRlIFJlYWN0J3MgZXZlbnQgcHJvcGFnYXRpb25cbiAgICAgICAgICAgIHJlbmRlcmVyLnVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzKCgpID0+IHtcbiAgICAgICAgICAgICAgaGFuZGxlciguLi5hcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYmF0Y2hlZFVwZGF0ZXMoZm4pIHtcbiAgICAgICAgcmV0dXJuIHdpdGhTZXRTdGF0ZUFsbG93ZWQoKCkgPT4gcmVuZGVyZXIudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMoZm4pKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNyZWF0ZVN0cmluZ1JlbmRlcmVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVuZGVyKGVsLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRleHQgJiYgKGVsLnR5cGUuY29udGV4dFR5cGVzIHx8IG9wdGlvbnMuY2hpbGRDb250ZXh0VHlwZXMpKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gICAgICAgICAgICAuLi4oZWwudHlwZS5jb250ZXh0VHlwZXMgfHwge30pLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5jaGlsZENvbnRleHRUeXBlcyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IENvbnRleHRXcmFwcGVyID0gY3JlYXRlUmVuZGVyV3JhcHBlcihlbCwgY29udGV4dCwgY2hpbGRDb250ZXh0VHlwZXMpO1xuICAgICAgICAgIHJldHVybiBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRleHRXcmFwcGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKGVsKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIFByb3ZpZGVkIGEgYmFnIG9mIG9wdGlvbnMsIHJldHVybiBhbiBgRW56eW1lUmVuZGVyZXJgLiBTb21lIG9wdGlvbnMgY2FuIGJlIGltcGxlbWVudGF0aW9uXG4gIC8vIHNwZWNpZmljLCBsaWtlIGBhdHRhY2hgIGV0Yy4gZm9yIFJlYWN0LCBidXQgbm90IHBhcnQgb2YgdGhpcyBpbnRlcmZhY2UgZXhwbGljaXRseS5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMsIG5vLXVudXNlZC12YXJzXG4gIGNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpIHtcbiAgICBzd2l0Y2ggKG9wdGlvbnMubW9kZSkge1xuICAgICAgY2FzZSBFbnp5bWVBZGFwdGVyLk1PREVTLk1PVU5UOiByZXR1cm4gdGhpcy5jcmVhdGVNb3VudFJlbmRlcmVyKG9wdGlvbnMpO1xuICAgICAgY2FzZSBFbnp5bWVBZGFwdGVyLk1PREVTLlNIQUxMT1c6IHJldHVybiB0aGlzLmNyZWF0ZVNoYWxsb3dSZW5kZXJlcihvcHRpb25zKTtcbiAgICAgIGNhc2UgRW56eW1lQWRhcHRlci5NT0RFUy5TVFJJTkc6IHJldHVybiB0aGlzLmNyZWF0ZVN0cmluZ1JlbmRlcmVyKG9wdGlvbnMpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbnp5bWUgSW50ZXJuYWwgRXJyb3I6IFVucmVjb2duaXplZCBtb2RlOiAke29wdGlvbnMubW9kZX1gKTtcbiAgICB9XG4gIH1cblxuICB3cmFwKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gd3JhcChlbGVtZW50KTtcbiAgfVxuXG4gIC8vIGNvbnZlcnRzIGFuIFJTVE5vZGUgdG8gdGhlIGNvcnJlc3BvbmRpbmcgSlNYIFByYWdtYSBFbGVtZW50LiBUaGlzIHdpbGwgYmUgbmVlZGVkXG4gIC8vIGluIG9yZGVyIHRvIGltcGxlbWVudCB0aGUgYFdyYXBwZXIubW91bnQoKWAgYW5kIGBXcmFwcGVyLnNoYWxsb3coKWAgbWV0aG9kcywgYnV0IHNob3VsZFxuICAvLyBiZSBwcmV0dHkgc3RyYWlnaHRmb3J3YXJkIGZvciBwZW9wbGUgdG8gaW1wbGVtZW50LlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcywgbm8tdW51c2VkLXZhcnNcbiAgbm9kZVRvRWxlbWVudChub2RlKSB7XG4gICAgaWYgKCFub2RlIHx8IHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQobm9kZS50eXBlLCBwcm9wc1dpdGhLZXlzQW5kUmVmKG5vZGUpKTtcbiAgfVxuXG4gIGVsZW1lbnRUb05vZGUoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50VG9UcmVlKGVsZW1lbnQpO1xuICB9XG5cbiAgbm9kZVRvSG9zdE5vZGUobm9kZSkge1xuICAgIHJldHVybiBSZWFjdERPTS5maW5kRE9NTm9kZShub2RlLmluc3RhbmNlKTtcbiAgfVxuXG4gIGRpc3BsYXlOYW1lT2ZOb2RlKG5vZGUpIHtcbiAgICByZXR1cm4gZGlzcGxheU5hbWVPZk5vZGUobm9kZSk7XG4gIH1cblxuICBpc1ZhbGlkRWxlbWVudChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGlzRWxlbWVudChlbGVtZW50KTtcbiAgfVxuXG4gIGlzVmFsaWRFbGVtZW50VHlwZShvYmplY3QpIHtcbiAgICByZXR1cm4gaXNWYWxpZEVsZW1lbnRUeXBlKG9iamVjdCk7XG4gIH1cblxuICBpc0N1c3RvbUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoLi4uYXJncykge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KC4uLmFyZ3MpO1xuICB9XG5cbiAgaW52b2tlU2V0U3RhdGVDYWxsYmFjayhpbnN0YW5jZSwgY2FsbGJhY2spIHtcbiAgICAvLyBSZWFjdCBpbiA+PSAxNS40LCBhbmQgPCAxNiBwYXNzIHVuZGVmaW5lZCB0byBhIHNldFN0YXRlIGNhbGxiYWNrXG4gICAgY2FsbGJhY2suY2FsbChpbnN0YW5jZSwgdW5kZWZpbmVkKTtcbiAgfVxuXG4gIHdyYXBXaXRoV3JhcHBpbmdDb21wb25lbnQobm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICBSb290RmluZGVyLFxuICAgICAgbm9kZTogd3JhcFdpdGhXcmFwcGluZ0NvbXBvbmVudChSZWFjdC5jcmVhdGVFbGVtZW50LCBub2RlLCBvcHRpb25zKSxcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RGaWZ0ZWVuQWRhcHRlcjtcbiJdfQ==
//# sourceMappingURL=ReactFifteenAdapter.js.map